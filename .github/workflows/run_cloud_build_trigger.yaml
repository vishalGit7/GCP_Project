name: 'Run Cloud Build Trigger Manually'

on:
  workflow_dispatch: 

jobs:
  deploy:
    name: 'Deploy Infrastructure'
    runs-on: ubuntu-latest  # Run the workflow on an Ubuntu runner

    defaults:
      run:
        shell: bash  # Use the Bash shell

    steps:
    - id: 'auth'
      uses: 'google-github-actions/auth@v2'
      # with:
      #   workload_identity_provider: 'projects/123456789/locations/global/workloadIdentityPools/my-pool/providers/my-provider'
      #   service_account: 'my-service-account@my-project.iam.gserviceaccount.com'
      env:
          GOOGLE_CREDENTIALS: ${{ secrets.GOOGLE_CREDENTIALS }}

    - name: 'Set up Cloud SDK'
      uses: 'google-github-actions/setup-gcloud@v2'
      with:
        version: '>= 363.0.0'
      env:
          GOOGLE_CREDENTIALS: ${{ secrets.GOOGLE_CREDENTIALS }}

    - name: 'Use gcloud CLI'
      run: 'gcloud info'
      env:
          GOOGLE_CREDENTIALS: ${{ secrets.GOOGLE_CREDENTIALS }}